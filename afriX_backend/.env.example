# File: /Users/harz/AfriExchange/afriX_backend/.env.example

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=5000
API_VERSION=v1

# ============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=afritokens
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_DIALECT=postgres
DB_POOL_MAX=5
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# Database Selection (Local vs Remote)
# Set to 'true' to use the individual DB_* variables below instead of DATABASE_URL
DB_USE_LOCAL=true
DB_SSL=false

# Alternative: Full connection string (used if DB_USE_LOCAL is false or unset)
# DATABASE_URL=postgresql://user:password@localhost:5432/afritoken

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Alternative: Full connection string
# REDIS_URL=redis://localhost:6379

# ============================================
# JWT AUTHENTICATION
# ============================================
JWT_SECRET=change_this_to_a_very_long_random_string_min_32_chars
JWT_REFRESH_SECRET=change_this_to_another_long_random_string
JWT_EXPIRE=24h
JWT_REFRESH_EXPIRE=30d

# ============================================
# BLOCKCHAIN CONFIGURATION (Polygon)
# ============================================
# Testnet (Mumbai) - Use for development
POLYGON_TESTNET_RPC_URL=https://rpc-mumbai.maticvigil.com
POLYGON_TESTNET_CHAIN_ID=80001

# Mainnet - Use for production
POLYGON_RPC_URL=https://polygon-rpc.com
POLYGON_CHAIN_ID=137

# Active Network (testnet or mainnet)
ACTIVE_NETWORK=testnet

# Smart Contract Addresses (Update after deployment)
NT_TOKEN_ADDRESS=0x0000000000000000000000000000000000000000
CT_TOKEN_ADDRESS=0x0000000000000000000000000000000000000000
ESCROW_CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000
AGENT_REGISTRY_ADDRESS=0x0000000000000000000000000000000000000000
SWAP_CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# Platform Wallet (Hot wallet for gas fees)
# SECURITY: Never commit actual private keys to git
PLATFORM_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000
PLATFORM_ADDRESS=0x0000000000000000000000000000000000000000

# Gas Configuration
GAS_LIMIT=300000
GAS_PRICE_MULTIPLIER=1.2

# ============================================
# CLOUDFLARE R2 STORAGE
# ============================================
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=afritoken-uploads
R2_PUBLIC_URL=https://pub-xxxxxxxxxxxxx.r2.dev
R2_REGION=auto

# ============================================
# EMAIL CONFIGURATION
# ============================================
# Option A: Resend (recommended for transactional emails; uses HTML templates)
# When RESEND_API_KEY is set, Resend is used and Nodemailer settings below are ignored.
RESEND_API_KEY=
RESEND_FROM=AfriX <support@exonec.com>

# Option B: Nodemailer (SMTP)
# Gmail Example
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=noreply@afritoken.com
EMAIL_PASSWORD=your_app_password_here
EMAIL_FROM=AfriToken <noreply@afritoken.com>

# SendGrid Alternative
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_USER=apikey
# EMAIL_PASSWORD=your_sendgrid_api_key

# ============================================
# SMS CONFIGURATION (Twilio)
# ============================================
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_VERIFY_SERVICE_SID=your_verify_service_sid

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:19006
CORS_CREDENTIALS=true

# ============================================
# FRONTEND URLS
# ============================================
FRONTEND_URL=http://localhost:3000
MOBILE_APP_SCHEME=afritoken://

# ============================================
# EXCHANGE RATE API (CoinGecko)
# ============================================
COINGECKO_API_URL=https://api.coingecko.com/api/v3
COINGECKO_API_KEY=
# Free tier doesn't require API key

# ============================================
# AGENT CONFIGURATION
# ============================================
AGENT_MIN_DEPOSIT_USD=500
AGENT_RECOMMENDED_DEPOSIT_USD=1000
AGENT_PREMIUM_DEPOSIT_USD=2500
AGENT_RATE_DEVIATION_PERCENT=5
# Agents can set rates within Â±5% of platform rate

# ============================================
# ESCROW & TRANSACTION CONFIGURATION
# ============================================
ESCROW_TIMEOUT_HOURS=2 # Changed from 0.5 hours (30 min)
AUTO_DISPUTE_DELAY_HOURS=2
TRANSACTION_CLEANUP_DAYS=90

# ============================================
# USER EDUCATION CONFIGURATION
# ============================================
EDUCATION_REQUIRED=true
EDUCATION_PASS_SCORE=80 # Must score 80% on quizzes
EDUCATION_MAX_ATTEMPTS=3

# ============================================
# TERMINOLOGY ENFORCEMENT
# ============================================
TERMINOLOGY_CHECK_ENABLED=true
TERMINOLOGY_LOG_WARNINGS=true
TERMINOLOGY_BLOCK_VIOLATIONS=false
# Set to true in production to block API responses with prohibited terms

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=info
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7

# ============================================
# SECURITY
# ============================================
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
SESSION_SECRET=change_this_session_secret_min_32_chars

# ============================================
# MONITORING (Optional)
# ============================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_WEBSOCKET=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_SMS_VERIFICATION=false
ENABLE_TWO_FACTOR_AUTH=false
ENABLE_KYC=false

# ============================================
# BUSINESS CONFIGURATION
# ============================================
# Transaction Fees (in percentage)
P2P_TRANSFER_FEE=0.5
TOKEN_SWAP_FEE=1.5
MERCHANT_COLLECTION_FEE=2.0
AGENT_FACILITATION_FEE=1.0

# Transaction Limits (in USD)
USER_DAILY_LIMIT_BASIC=100
USER_DAILY_LIMIT_VERIFIED=500
USER_DAILY_LIMIT_PREMIUM=2000

# ============================================
# DEVELOPMENT HELPERS
# ============================================
DEBUG_MODE=false
MOCK_BLOCKCHAIN=false
# Set to true to mock blockchain calls during development
SKIP_EMAIL_VERIFICATION=false
# Set to true to skip email verification during development